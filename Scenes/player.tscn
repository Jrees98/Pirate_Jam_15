[gd_scene load_steps=29 format=3 uid="uid://0v7jd01x8glb"]

[ext_resource type="Script" path="res://Scripts/player.gd" id="1_gr4sc"]
[ext_resource type="Texture2D" uid="uid://dvc2fmeimrhrm" path="res://Assets/miner.png" id="2_yy3j8"]
[ext_resource type="Texture2D" uid="uid://erbgsdcl3u8a" path="res://Assets/minecart.png" id="3_g64g8"]
[ext_resource type="Texture2D" uid="uid://ca0h5cevk42j2" path="res://Assets/coal.png" id="3_ligsf"]
[ext_resource type="Texture2D" uid="uid://j28m3o15p3kr" path="res://Assets/Miner 2.png" id="4_b7qrj"]
[ext_resource type="Texture2D" uid="uid://bv3x5wicyrss5" path="res://Assets/gems.png" id="4_njvkg"]
[ext_resource type="FontFile" uid="uid://b2k23t8adqnf7" path="res://Assets/monogram.ttf" id="5_nfwr5"]
[ext_resource type="Texture2D" uid="uid://bfpoipcw1glka" path="res://Assets/Untitled 15.png" id="8_xhd1y"]
[ext_resource type="Texture2D" uid="uid://b157jm05irlvi" path="res://Assets/Untitled 14.png" id="9_rhwn0"]
[ext_resource type="Texture2D" uid="uid://s4ufnhdi0b5q" path="res://Assets/Untitled 19.png" id="10_5xfsj"]
[ext_resource type="Texture2D" uid="uid://pdom4vs0mqf6" path="res://Assets/Untitled 20.png" id="11_vpsep"]
[ext_resource type="Texture2D" uid="uid://hryl0q3e7hr6" path="res://Assets/opal.png" id="12_ht1iw"]
[ext_resource type="Texture2D" uid="uid://46wyfoxca4u0" path="res://Assets/backpack.png" id="13_f76i6"]

[sub_resource type="AtlasTexture" id="AtlasTexture_qdtek"]
atlas = ExtResource("4_b7qrj")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_12rsq"]
atlas = ExtResource("4_b7qrj")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_s011i"]
atlas = ExtResource("4_b7qrj")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ut856"]
atlas = ExtResource("4_b7qrj")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_erdap"]
atlas = ExtResource("4_b7qrj")
region = Rect2(320, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_lmb3k"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_yy3j8")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_g64g8")
}],
"loop": true,
"name": &"minecart",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_qdtek")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_12rsq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s011i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ut856")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_erdap")
}],
"loop": true,
"name": &"walk",
"speed": 10.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fabt6"]
size = Vector2(71, 119)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_al6ms"]
bg_color = Color(0.560784, 0, 0.768627, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_cv82u"]
bg_color = Color(0.964706, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ek4kc"]
bg_color = Color(0, 1, 0.25098, 1)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_pdr77"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_nygen"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_fgdrl"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_7lfas"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_an1ty"]

[node name="Player" type="CharacterBody2D" groups=["player"]]
collision_layer = 2
collision_mask = 8
script = ExtResource("1_gr4sc")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
z_index = 3
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_lmb3k")
autoplay = "default"
frame_progress = 0.293101

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-0.5, 0.5)
shape = SubResource("RectangleShape2D_fabt6")

[node name="RockNodeUI" type="CanvasLayer" parent="."]
offset = Vector2(2.08165e-12, 2.08165e-12)
transform = Transform2D(1, 0, 0, 1, 2.08165e-12, 2.08165e-12)

[node name="InteractLabel" type="Label" parent="RockNodeUI"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -237.0
offset_top = -248.0
offset_right = 237.0
offset_bottom = -160.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 64
text = "Press E to mine"

[node name="CoalSprite" type="Sprite2D" parent="RockNodeUI"]
position = Vector2(127, 236)
scale = Vector2(4.03598, 4.93541)
texture = ExtResource("3_ligsf")

[node name="CoalQuantity" type="Label" parent="RockNodeUI/CoalSprite"]
offset_left = -7.80951
offset_top = -16.8358
offset_right = 28.1905
offset_bottom = 9.16418
theme_override_fonts/font = ExtResource("5_nfwr5")
theme_override_font_sizes/font_size = 32
text = "0"

[node name="HBoxContainer" type="HBoxContainer" parent="RockNodeUI"]
visible = false
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 3.0
offset_top = -468.0
offset_right = 354.0
offset_bottom = -233.0
grow_vertical = 0
alignment = 2

[node name="BlueGemSprite" type="Sprite2D" parent="RockNodeUI/HBoxContainer"]
position = Vector2(89, -106)
scale = Vector2(4.06293, 4.70662)
texture = ExtResource("4_njvkg")

[node name="GemQuantity" type="Label" parent="RockNodeUI/HBoxContainer/BlueGemSprite"]
offset_left = -4.85889
offset_top = -14.9404
offset_right = 31.1411
offset_bottom = 11.0596
theme_override_fonts/font = ExtResource("5_nfwr5")
theme_override_font_sizes/font_size = 32
text = "0"

[node name="RedGemSprite2" type="Sprite2D" parent="RockNodeUI/HBoxContainer"]
position = Vector2(89, 32)
scale = Vector2(3.53039, 4.54533)
texture = ExtResource("8_xhd1y")

[node name="GemQuantity" type="Label" parent="RockNodeUI/HBoxContainer/RedGemSprite2"]
offset_left = -4.93619
offset_top = -14.4852
offset_right = 31.0638
offset_bottom = 11.5148
theme_override_fonts/font = ExtResource("5_nfwr5")
theme_override_font_sizes/font_size = 32
text = "0"

[node name="GreenGemSprite3" type="Sprite2D" parent="RockNodeUI/HBoxContainer"]
position = Vector2(237, -106)
scale = Vector2(3.835, 4.85157)
texture = ExtResource("9_rhwn0")

[node name="GemQuantity" type="Label" parent="RockNodeUI/HBoxContainer/GreenGemSprite3"]
offset_left = -4.86713
offset_top = -15.5077
offset_right = 31.1329
offset_bottom = 10.4923
theme_override_fonts/font = ExtResource("5_nfwr5")
theme_override_font_sizes/font_size = 32
text = "0"

[node name="PurpleGemSprite4" type="Sprite2D" parent="RockNodeUI/HBoxContainer"]
self_modulate = Color(1, 0, 1, 1)
position = Vector2(236, 29)
scale = Vector2(3.80673, 4.45425)
texture = ExtResource("10_5xfsj")

[node name="GemQuantity" type="Label" parent="RockNodeUI/HBoxContainer/PurpleGemSprite4"]
offset_left = -6.48174
offset_top = -14.5548
offset_right = 29.5183
offset_bottom = 11.4452
theme_override_fonts/font = ExtResource("5_nfwr5")
theme_override_font_sizes/font_size = 32
text = "0"

[node name="WhiteGemSprite5" type="Sprite2D" parent="RockNodeUI/HBoxContainer"]
position = Vector2(102, 159)
scale = Vector2(3.80673, 4.45425)
texture = ExtResource("11_vpsep")

[node name="GemQuantity" type="Label" parent="RockNodeUI/HBoxContainer/WhiteGemSprite5"]
offset_left = -6.48174
offset_top = -14.5548
offset_right = 29.5183
offset_bottom = 11.4452
theme_override_fonts/font = ExtResource("5_nfwr5")
theme_override_font_sizes/font_size = 32
text = "0"

[node name="OpalGemSprite6" type="Sprite2D" parent="RockNodeUI/HBoxContainer"]
position = Vector2(236, 186)
scale = Vector2(1.07812, 1.58681)
texture = ExtResource("12_ht1iw")

[node name="OpalGemQuantity" type="Label" parent="RockNodeUI/HBoxContainer/OpalGemSprite6"]
offset_left = -9.27535
offset_top = -48.5252
offset_right = 26.7247
offset_bottom = -22.5252
scale = Vector2(2.71093, 2.28301)
theme_override_fonts/font = ExtResource("5_nfwr5")
theme_override_font_sizes/font_size = 32
text = "0"

[node name="Coins" type="Label" parent="RockNodeUI"]
offset_left = 104.0
offset_top = 35.0
offset_right = 155.0
offset_bottom = 58.0
scale = Vector2(5.4708, 7.39833)
theme_override_colors/font_color = Color(0, 1, 0, 1)
theme_override_fonts/font = ExtResource("5_nfwr5")
text = "Coins: "

[node name="SanityBar" type="ProgressBar" parent="RockNodeUI"]
offset_left = 2226.0
offset_top = 978.0
offset_right = 2230.0
offset_bottom = 1005.0
scale = Vector2(10.92, 10.92)
theme_override_styles/fill = SubResource("StyleBoxFlat_al6ms")
value = 50.0
rounded = true
fill_mode = 3
show_percentage = false

[node name="RegainEnergy" type="Timer" parent="RockNodeUI/SanityBar"]
wait_time = 0.1

[node name="LoseEnergy" type="Timer" parent="RockNodeUI/SanityBar"]

[node name="ProgressBar" type="ProgressBar" parent="RockNodeUI"]
offset_left = 2157.0
offset_top = 978.0
offset_right = 2161.0
offset_bottom = 1005.0
scale = Vector2(10.92, 10.92)
theme_override_styles/background = SubResource("StyleBoxFlat_cv82u")
theme_override_styles/fill = SubResource("StyleBoxFlat_ek4kc")
value = 90.0
fill_mode = 3
show_percentage = false

[node name="BackpackToggleButton" type="Sprite2D" parent="RockNodeUI"]
position = Vector2(112, 1182)
scale = Vector2(5, 5)
texture = ExtResource("13_f76i6")

[node name="GemsToggleButton" type="Button" parent="RockNodeUI/BackpackToggleButton"]
offset_left = -13.0
offset_top = -7.0
offset_right = 13.0
offset_bottom = 18.0
theme_override_styles/normal = SubResource("StyleBoxEmpty_pdr77")
theme_override_styles/hover = SubResource("StyleBoxEmpty_nygen")
theme_override_styles/pressed = SubResource("StyleBoxEmpty_fgdrl")
theme_override_styles/disabled = SubResource("StyleBoxEmpty_7lfas")
theme_override_styles/focus = SubResource("StyleBoxEmpty_an1ty")
toggle_mode = true

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(2, 2)
limit_top = -200
limit_bottom = 450

[node name="Health_tracker" type="Timer" parent="."]
wait_time = 0.5
autostart = true

[connection signal="timeout" from="RockNodeUI/SanityBar/RegainEnergy" to="." method="_on_regain_energy_timeout"]
[connection signal="timeout" from="RockNodeUI/SanityBar/LoseEnergy" to="." method="_on_lose_energy_timeout"]
[connection signal="pressed" from="RockNodeUI/BackpackToggleButton/GemsToggleButton" to="." method="_on_gems_toggle_button_pressed"]
[connection signal="timeout" from="Health_tracker" to="." method="_on_health_tracker_timeout"]
